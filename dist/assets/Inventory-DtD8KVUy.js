import{_ as p,m,d as c,c as i,a as t,t as n,b as u,v as x,h as g,F as f,r as y,e as v,f as k,g as S,o as l,n as _}from"./index-DpA24Vcn.js";import{S as w}from"./StockUpdate-vOmCEfxf.js";const b={name:"Inventory",components:{StockUpdate:w},data(){return{search:"",stockFilter:"all",selectedItem:null,lowStockThreshold:5}},computed:{...m("products",{products:e=>e.items,loading:e=>e.loading,error:e=>e.error}),inventory(){return this.products?this.products.map(e=>({id:e.id,productId:e.id,name:e.name,quantity:e.quantity})):[]},filteredInventory(){return this.inventory.filter(e=>{const s=!this.search||e.name.toLowerCase().includes(this.search.toLowerCase()),a=this.filterByStockLevel(e.quantity);return s&&a})},totalProducts(){return this.inventory.length},lowStockItems(){return this.inventory.filter(e=>e.quantity>0&&e.quantity<=this.lowStockThreshold).length},outOfStockItems(){return this.inventory.filter(e=>e.quantity===0).length}},methods:{...c("products",["fetchProducts"]),...c("inventory",["updateStock"]),filterByStockLevel(e){switch(this.stockFilter){case"low":return e>0&&e<=this.lowStockThreshold;case"out":return e===0;default:return!0}},getStockStatus(e){return e===0?"Esgotado":e<=this.lowStockThreshold?"Estoque baixo":"Estoque ok"},getStockStatusClass(e){return e===0?"bg-red-100 text-red-800":e<=this.lowStockThreshold?"bg-orange-100 text-orange-800":"bg-green-100 text-green-800"},updateStock(e){this.selectedItem={id:e.productId,name:e.name,currentQuantity:e.quantity}},async saveStock(e){console.log("Stock data received:",e),await this.$store.dispatch("inventory/updateStock",{productId:this.selectedItem.id,data:e}),this.selectedItem=null,await this.fetchProducts()}},mounted(){this.fetchProducts()}},I={class:"container"},q={class:"grid grid-cols-1 gap-5 sm:grid-cols-3 mb-6"},C={class:"bg-white overflow-hidden shadow rounded-lg"},E={class:"px-4 py-5 sm:p-6"},P={class:"mt-1 text-3xl font-semibold text-gray-900"},T={class:"bg-white overflow-hidden shadow rounded-lg"},B={class:"px-4 py-5 sm:p-6"},F={class:"mt-1 text-3xl font-semibold text-orange-600"},L={class:"bg-white overflow-hidden shadow rounded-lg"},U={class:"px-4 py-5 sm:p-6"},V={class:"mt-1 text-3xl font-semibold text-red-600"},A={class:"bg-white shadow rounded-lg p-6 mb-6"},z={class:"flex space-x-4"},M={class:"flex-1"},N={class:"bg-white shadow rounded-lg overflow-hidden"},O={class:"min-w-full divide-y divide-gray-200"},Q={class:"bg-white divide-y divide-gray-200"},D={class:"px-6 py-4"},j={class:"px-6 py-4"},G={class:"px-6 py-4"},H={class:"px-6 py-4"},J=["onClick"];function K(e,s,a,R,r,d){const h=S("StockUpdate");return l(),i("div",I,[s[8]||(s[8]=t("div",{class:"mb-6"},[t("h2",{class:"text-2xl font-bold text-gray-900"},"Estoque")],-1)),t("div",q,[t("div",C,[t("div",E,[s[3]||(s[3]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"}," Total Produtos ",-1)),t("dd",P,n(d.totalProducts),1)])]),t("div",T,[t("div",B,[s[4]||(s[4]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"}," Itens Estoque Baixo ",-1)),t("dd",F,n(d.lowStockItems),1)])]),t("div",L,[t("div",U,[s[5]||(s[5]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"}," Itens Esgotados ",-1)),t("dd",V,n(d.outOfStockItems),1)])])]),t("div",A,[t("div",z,[t("div",M,[u(t("input",{"onUpdate:modelValue":s[0]||(s[0]=o=>r.search=o),type:"text",placeholder:"Procurar produtos...",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[x,r.search]])]),t("div",null,[u(t("select",{"onUpdate:modelValue":s[1]||(s[1]=o=>r.stockFilter=o),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},s[6]||(s[6]=[t("option",{value:"all"},"Todos níveis estoque",-1),t("option",{value:"low"},"Estoque baixo",-1),t("option",{value:"out"},"Esgotados",-1)]),512),[[g,r.stockFilter]])])])]),t("div",N,[t("table",O,[s[7]||(s[7]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"}," Produto "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"}," Qtde Estoque "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"}," Status "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"}," Ações ")])],-1)),t("tbody",Q,[(l(!0),i(f,null,y(d.filteredInventory,o=>(l(),i("tr",{key:o.id},[t("td",D,n(o.name),1),t("td",j,n(o.quantity),1),t("td",G,[t("span",{class:_(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",d.getStockStatusClass(o.quantity)])},n(d.getStockStatus(o.quantity)),3)]),t("td",H,[t("button",{onClick:W=>d.updateStock(o),class:"text-indigo-600 hover:text-indigo-900"}," Atualizar estoque ",8,J)])]))),128))])])]),r.selectedItem?(l(),v(h,{key:0,product:r.selectedItem,onClose:s[2]||(s[2]=o=>r.selectedItem=null),onSave:d.saveStock},null,8,["product","onSave"])):k("",!0)])}const Z=p(b,[["render",K]]);export{Z as default};
