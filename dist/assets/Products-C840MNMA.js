import{_ as b,o as l,c as n,a as t,t as a,w as _,b as c,v as u,m as k,d as p,F as P,r as w,e as f,f as h,g}from"./index-DyvGHz3B.js";import{S}from"./StockUpdate-DP4baTi9.js";const M={name:"ProductForm",props:{product:{type:Object,default:null}},data(){return{formData:{name:"",cost_price:0,sell_price:0}}},created(){this.product&&(this.formData={...this.product})},methods:{handleSubmit(){this.$emit("save",this.formData)}}},C={class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full"},D={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},A={class:"mt-3"},V={class:"text-lg font-medium text-gray-900"},F={class:"mb-4"},N={class:"mb-4"},U={class:"mb-4"},$={class:"mt-6 flex justify-end space-x-3"};function q(o,e,m,y,s,r){return l(),n("div",C,[t("div",D,[t("div",A,[t("h3",V,a(m.product?"Edit Product":"Add New Product"),1),t("form",{onSubmit:e[4]||(e[4]=_((...d)=>r.handleSubmit&&r.handleSubmit(...d),["prevent"])),class:"mt-4"},[t("div",F,[e[5]||(e[5]=t("label",{class:"block text-sm font-medium text-gray-700"},"Nome",-1)),c(t("input",{"onUpdate:modelValue":e[0]||(e[0]=d=>s.formData.name=d),type:"text",required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[u,s.formData.name]])]),t("div",N,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium text-gray-700"},"Preço Custo",-1)),c(t("input",{"onUpdate:modelValue":e[1]||(e[1]=d=>s.formData.cost_price=d),type:"number",step:"0.01",required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[u,s.formData.cost_price,void 0,{number:!0}]])]),t("div",U,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium text-gray-700"},"Preço Venda",-1)),c(t("input",{"onUpdate:modelValue":e[2]||(e[2]=d=>s.formData.sell_price=d),type:"number",step:"0.01",required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[u,s.formData.sell_price,void 0,{number:!0}]])]),t("div",$,[t("button",{type:"button",onClick:e[3]||(e[3]=d=>o.$emit("close")),class:"px-4 py-2 border rounded-md hover:bg-gray-100"}," Cancelar "),e[8]||(e[8]=t("button",{type:"submit",class:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700"}," Salvar ",-1))])],32)])])])}const B=b(M,[["render",q]]),E={name:"Products",components:{ProductForm:B,StockUpdate:S},data(){return{showAddModal:!1,showStockModal:!1,selectedProduct:null}},computed:{...k("products",{products:o=>o.items,loading:o=>o.loading,error:o=>o.error})},methods:{...p("products",["fetchProducts","createProduct","updateProduct"]),...p("inventory",["updateStock"]),editProduct(o){this.selectedProduct=o,this.showAddModal=!0},updateStock(o){this.selectedProduct=o,this.showStockModal=!0},closeModal(){this.showAddModal=!1,this.selectedProduct=null},closeStockModal(){this.showStockModal=!1,this.selectedProduct=null},async saveProduct(o){this.selectedProduct?await this.updateProduct({id:this.selectedProduct.id,...o}):await this.createProduct(o),this.closeModal(),this.fetchProducts()},async saveStock(o){await this.updateStock({productId:this.selectedProduct.id,data:o}),this.closeStockModal(),this.fetchProducts()}},mounted(){this.fetchProducts()}},j={class:"container"},L={class:"mb-6 flex justify-between items-center"},I={class:"bg-white shadow rounded-lg"},O={key:0},T={key:1},z={key:2,class:"min-w-full divide-y divide-gray-200"},G={class:"divide-y divide-gray-200"},H={class:"px-6 py-4"},J={class:"px-6 py-4"},K={class:"px-6 py-4"},Q={class:"px-6 py-4"},R=["onClick"],W=["onClick"];function X(o,e,m,y,s,r){const d=g("ProductForm"),x=g("StockUpdate");return l(),n("div",j,[t("div",L,[e[1]||(e[1]=t("h2",{class:"text-2xl font-bold text-gray-900"},"Produtos",-1)),t("button",{onClick:e[0]||(e[0]=i=>s.showAddModal=!0),class:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700"}," + Novo Produto ")]),t("pre",null,a(o.products.data),1),t("div",I,[o.loading?(l(),n("div",O,"Loading...")):o.error?(l(),n("div",T,a(o.error),1)):(l(),n("table",z,[e[2]||(e[2]=t("thead",null,[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"}," Nome "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"}," Preço Custo "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"}," Preço Venda "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"}," Ações ")])],-1)),t("tbody",G,[(l(!0),n(P,null,w(o.products,i=>(l(),n("tr",{key:i.id},[t("td",H,a(i.name),1),t("td",J,"$"+a(i.cost_price),1),t("td",K,"$"+a(i.sell_price),1),t("td",Q,[t("button",{onClick:v=>r.editProduct(i),class:"text-indigo-600 hover:text-indigo-900 mr-3"}," Editar ",8,R),t("button",{onClick:v=>r.updateStock(i),class:"text-green-600 hover:text-green-900"}," Estoque ",8,W)])]))),128))])]))]),s.showAddModal?(l(),f(d,{key:0,product:s.selectedProduct,onClose:r.closeModal,onSave:r.saveProduct},null,8,["product","onClose","onSave"])):h("",!0),s.showStockModal?(l(),f(x,{key:1,product:s.selectedProduct,onClose:r.closeStockModal,onSave:r.saveStock},null,8,["product","onClose","onSave"])):h("",!0)])}const tt=b(E,[["render",X]]);export{tt as default};
